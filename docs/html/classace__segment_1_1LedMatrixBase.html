<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AceSegment: ace_segment::LedMatrixBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AceSegment
   &#160;<span id="projectnumber">0.4.0</span>
   </div>
   <div id="projectbrief">An adjustable, configurable, and extensible framework for rendering seven segment LED displays.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ace_segment</b></li><li class="navelem"><a class="el" href="classace__segment_1_1LedMatrixBase.html">LedMatrixBase</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classace__segment_1_1LedMatrixBase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ace_segment::LedMatrixBase Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class that represents the abstraction of a particular LED display wiring, and knows how to turn off and turn on a specific group of LEDs with a specific pattern.  
 <a href="classace__segment_1_1LedMatrixBase.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LedMatrixBase_8h_source.html">LedMatrixBase.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ace_segment::LedMatrixBase:</div>
<div class="dyncontent">
<div class="center"><img src="classace__segment_1_1LedMatrixBase__inherit__graph.png" border="0" usemap="#ace__segment_1_1LedMatrixBase_inherit__map" alt="Inheritance graph"/></div>
<map name="ace__segment_1_1LedMatrixBase_inherit__map" id="ace__segment_1_1LedMatrixBase_inherit__map">
<area shape="rect" title="Class that represents the abstraction of a particular LED display wiring, and knows how to turn off a..." alt="" coords="5,64,220,91"/>
<area shape="rect" href="classace__segment_1_1LedMatrixDirect.html" title="An LedMatrixBase that whose group pins and element pins are wired directly to the MCU." alt="" coords="268,5,529,32"/>
<area shape="rect" href="classace__segment_1_1LedMatrixDualShiftRegister.html" title="An LedMatrix that whose group pins are attached to one 74HC595 shift register and the element pins ar..." alt="" coords="293,57,505,98"/>
<area shape="rect" href="classace__segment_1_1LedMatrixSingleShiftRegister.html" title="An implementation of LedMatrixBase with an 74HC595 Serial&#45;To&#45;Parallel converter chip on the segment p..." alt="" coords="287,122,510,163"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab53a3edaa944f19196c9170c3830bb6f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#ab53a3edaa944f19196c9170c3830bb6f">LedMatrixBase</a> (uint8_t groupOnPattern, uint8_t elementOnPattern)</td></tr>
<tr class="separator:ab53a3edaa944f19196c9170c3830bb6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c068db5e59b80d0884a1af616177f0e"><td class="memItemLeft" align="right" valign="top"><a id="a5c068db5e59b80d0884a1af616177f0e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#a5c068db5e59b80d0884a1af616177f0e">begin</a> () const</td></tr>
<tr class="memdesc:a5c068db5e59b80d0884a1af616177f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the pins for the given LED wiring. <br /></td></tr>
<tr class="separator:a5c068db5e59b80d0884a1af616177f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36c163f093b05a7a25daf40d5842186f"><td class="memItemLeft" align="right" valign="top"><a id="a36c163f093b05a7a25daf40d5842186f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#a36c163f093b05a7a25daf40d5842186f">end</a> () const</td></tr>
<tr class="memdesc:a36c163f093b05a7a25daf40d5842186f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn off the pins by doing the opposite of <a class="el" href="classace__segment_1_1LedMatrixBase.html#a5c068db5e59b80d0884a1af616177f0e" title="Configure the pins for the given LED wiring.">begin()</a>. <br /></td></tr>
<tr class="separator:a36c163f093b05a7a25daf40d5842186f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d2bc50b50ab4b2c16c1ef53b3397d2"><td class="memItemLeft" align="right" valign="top"><a id="ad9d2bc50b50ab4b2c16c1ef53b3397d2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#ad9d2bc50b50ab4b2c16c1ef53b3397d2">draw</a> (uint8_t, uint8_t) const</td></tr>
<tr class="memdesc:ad9d2bc50b50ab4b2c16c1ef53b3397d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write element patterns for the given group. <br /></td></tr>
<tr class="separator:ad9d2bc50b50ab4b2c16c1ef53b3397d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392418ec3a4e763920e21acc763e8848"><td class="memItemLeft" align="right" valign="top"><a id="a392418ec3a4e763920e21acc763e8848"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#a392418ec3a4e763920e21acc763e8848">disableGroup</a> (uint8_t) const</td></tr>
<tr class="memdesc:a392418ec3a4e763920e21acc763e8848"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the elements of given group. <br /></td></tr>
<tr class="separator:a392418ec3a4e763920e21acc763e8848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2443123d487980dc87a59dc61f0c3bb"><td class="memItemLeft" align="right" valign="top"><a id="ae2443123d487980dc87a59dc61f0c3bb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#ae2443123d487980dc87a59dc61f0c3bb">enableGroup</a> (uint8_t) const</td></tr>
<tr class="memdesc:ae2443123d487980dc87a59dc61f0c3bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the elements of given group. <br /></td></tr>
<tr class="separator:ae2443123d487980dc87a59dc61f0c3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5fb153442f0504f93461b9d9f6f9a3e"><td class="memItemLeft" align="right" valign="top"><a id="aa5fb153442f0504f93461b9d9f6f9a3e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#aa5fb153442f0504f93461b9d9f6f9a3e">clear</a> () const</td></tr>
<tr class="memdesc:aa5fb153442f0504f93461b9d9f6f9a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear everything. <br /></td></tr>
<tr class="separator:aa5fb153442f0504f93461b9d9f6f9a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ade3ca76e0a5f73f36eb17d533799f627"><td class="memItemLeft" align="right" valign="top"><a id="ade3ca76e0a5f73f36eb17d533799f627"></a>
static constexpr uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#ade3ca76e0a5f73f36eb17d533799f627">kActiveHighPattern</a> = 0xFF</td></tr>
<tr class="memdesc:ade3ca76e0a5f73f36eb17d533799f627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit pattern to indicate that logical 1 activates group or element. <br /></td></tr>
<tr class="separator:ade3ca76e0a5f73f36eb17d533799f627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af30041c0cd3a4f12c8ad857c3ac478d7"><td class="memItemLeft" align="right" valign="top"><a id="af30041c0cd3a4f12c8ad857c3ac478d7"></a>
static constexpr uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#af30041c0cd3a4f12c8ad857c3ac478d7">kActiveLowPattern</a> = 0x00</td></tr>
<tr class="memdesc:af30041c0cd3a4f12c8ad857c3ac478d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit pattern to indicate that logical 0 activates group or element. <br /></td></tr>
<tr class="separator:af30041c0cd3a4f12c8ad857c3ac478d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a3b13edd785397b6ed934ef16d1dd06f7"><td class="memItemLeft" align="right" valign="top"><a id="a3b13edd785397b6ed934ef16d1dd06f7"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>mGroupXorMask</b></td></tr>
<tr class="separator:a3b13edd785397b6ed934ef16d1dd06f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11a17db0a95794192c0f45cf431f3df6"><td class="memItemLeft" align="right" valign="top"><a id="a11a17db0a95794192c0f45cf431f3df6"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>mElementXorMask</b></td></tr>
<tr class="separator:a11a17db0a95794192c0f45cf431f3df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that represents the abstraction of a particular LED display wiring, and knows how to turn off and turn on a specific group of LEDs with a specific pattern. </p>
<p>This class is conceptually stateless. The API exposes a class that does not remember the LED element patterns that is currently being displayed. (However, an implementation class may need to cache a small bit of information to implement this API abstraction.)</p>
<p>I have provided 3 wiring implementations:</p>
<ul>
<li><a class="el" href="classace__segment_1_1LedMatrixDirect.html" title="An LedMatrixBase that whose group pins and element pins are wired directly to the MCU.">LedMatrixDirect</a><ul>
<li>The group and element pins are directly attached to GPIO pins on the microcontroller.</li>
</ul>
</li>
<li><a class="el" href="classace__segment_1_1LedMatrixSingleShiftRegister.html" title="An implementation of LedMatrixBase with an 74HC595 Serial-To-Parallel converter chip on the segment p...">LedMatrixSingleShiftRegister</a><ul>
<li>The group pins are directly attached to GPIO pins.</li>
<li>The Segment pins are attached to one 74HC595 shift register chip, accessed through SPI (either software or hardware).</li>
</ul>
</li>
<li><a class="el" href="classace__segment_1_1LedMatrixDualShiftRegister.html" title="An LedMatrix that whose group pins are attached to one 74HC595 shift register and the element pins ar...">LedMatrixDualShiftRegister</a><ul>
<li>Both the Group and Element pins are controlled by 74HC595 chips using SPI (software or hardware).</li>
</ul>
</li>
</ul>
<p>If the resistors are on the segments, then the segments become the Elements and the digits become the Groups.</p>
<p>If the resistors are on the digits, then the digits become the Elements and the segments become the Groups. This configuration is not very useful and has not been tested very much.</p>
<p>The groupOnPattern and elementOnPattern is the bit pattern that activates the group or element. For example, a Common Cathode places the negative end of the LED on the group pin and the element pins are positive. So groupOnPattern should be kActiveLowPattern and elementOnPattern should be kActiveHighPattern. However, if a driver transitor is placed on the group pins to handle the higher current, then it inverts the logic on the group pins, so groupOnPattern must be set to kActiveHighPattern.</p>
<p>The groupOnPattern and elementPattern are compile-time constants so these parameters could be moved into the template parameters. When I did that, the flash size when down by only ~20 bytes on AVR, and ~40 bytes on an STM32. I decided to leave them as instance variables, because the decrease in readability of the code didn't seem worth 20 bytes. </p>

<p class="definition">Definition at line <a class="el" href="LedMatrixBase_8h_source.html#l00072">72</a> of file <a class="el" href="LedMatrixBase_8h_source.html">LedMatrixBase.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab53a3edaa944f19196c9170c3830bb6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab53a3edaa944f19196c9170c3830bb6f">&#9670;&nbsp;</a></span>LedMatrixBase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ace_segment::LedMatrixBase::LedMatrixBase </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>groupOnPattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>elementOnPattern</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">groupOnPattern</td><td>bit pattern that turns on the groups </td></tr>
    <tr><td class="paramname">elementOnPattern</td><td>bit pattern that turns on the elements on group </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LedMatrixBase_8h_source.html#l00085">85</a> of file <a class="el" href="LedMatrixBase_8h_source.html">LedMatrixBase.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/brian/src/AceSegment/src/ace_segment/<a class="el" href="LedMatrixBase_8h_source.html">LedMatrixBase.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
